import VirtualAssistant from "../../components/virtualAssistant";
import Layout from "../layout";
import styles from "./malware.module.css";
import { useState, useRef, useEffect } from "react";
import GoogleSearch from "./dummyChrome";
const MalwareInvasion = () => {
  const [points, setPoints] = useState(0);
  const [scenarioIndex, setScenarioIndex] = useState(0);
  const [scenarios, setScenarios] = useState([
    {
      background: "malware.jpeg",
      action: "List trusted websites and avoid untrusted ones",
      consequence:
        "Well done! Avoiding untrusted websites reduces the risk of malware infection.",
      points: 10,
    },
    {
      background: "malware.jpeg",
      action: "Download software from reputable sources only",
      consequence:
        "Great decision! Downloading from reputable sources minimizes the risk of downloading malware.",
      points: 15,
    },
    // Add more scenarios, actions, and consequences as needed
  ]);
  const websites = [
    {
      id: 1,
      url: "https://www.amaz0n.com", // Misspelled URL as label
      name: "Suspicious Look-alike Website",
      logo: "https://www.amaz0n.com/fake_logo.png", // Placeholder logo
      screenshot: "/amazon.png",
      isSecure: false,
      why: "Misspelled URL trying to impersonate Amazon, avoid entering information.",
    },
    {
      id: 2,
      url: "https://www.payypal.com/signin",
      name: "paypal",
      logo: "https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",
      screenshot: "/paypal.png",
      isSecure: false,
      why: "Misspelled URL trying to impersonate Paypal, avoid entering information.",
    },
    {
      id: 3,
      url: "https://phishingsite.notreal", // Placeholder for malicious label
      name: "Fake Bank Login",
      logo: "https://phishingsite.notreal/fake_bank_logo.png", // Placeholder logo
      screenshot: "NA",
      isSecure: false,
      why: "Misspelled domain name (phishing attempt).",
    },
    {
      id: 4,
      url: "https://www.softwarepromos.com", // Placeholder for risky site label
      name: "Free Software Downloads",
      logo: "https://www.softwarepromos.com/unknown_logo.png", // Placeholder logo
      screenshot: "NA",
      isSecure: "Uncertain",
      why: "Offers free software downloads, which can sometimes contain malware. Proceed with caution.",
    },
    {
      id: 5,
      url: "https://www.securebank.com",
      name: "Secure Bank Login",
      logo: "https://www.securebank.com/bank_logo.png", // Placeholder logo
      screenshot: "NA",
      isSecure: true,
      why: "Uses HTTPS and is a reputable bank website.",
    },
    {
      id: 6,
      url: "programupexploader.com", // Placeholder for malicious download site
      name: "Free Video Game Downloader",
      logo: "programupexploader.com/game_logo.png", // Placeholder logo
      screenshot: "NA",
      isSecure: false,
      why: "Unfamiliar website offering free downloads, likely malware distribution.",
    },
    {
      id: 7,
      url: "https://www.news.gov",
      name: "Government News Website",
      logo: "https://www.news.gov/logo.png", // Placeholder logo
      screenshot: "NA",
      isSecure: true,
      why: "Uses HTTPS and is a legitimate government website.",
    },
    {
      id: 8,
      url: "amazingdeals.co", // Placeholder for misleading website
      name: "Unbelievable Discounts!",
      logo: "amazingdeals.co/discount_logo.png", // Placeholder logo
      screenshot: "NA",
      isSecure: "Uncertain",
      why: "Offers unrealistic discounts, could be a scam or misleading advertisement.",
    },
    {
      id: 9,
      url: "https://www.wikipedia.org",
      name: "Wikipedia",
      logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Wikipedia_wordmark.svg/220px-Wikipedia_wordmark.svg.png",
      screenshot: "NA",
      isSecure: true,
      why: "Uses HTTPS and is a well-established online encyclopedia.",
    },
    {
      id: 10,
      url: "update-your-flashplayer.com", // Placeholder for fake update site
      name: "Flash Player Update Available",
      logo: "update-your-flashplayer.com/flash_logo.png", // Placeholder logo
      screenshot: "NA",
      isSecure: false,
      why: "Website urging a Flash Player update; Flash Player is no longer supported, likely a scam.",
    },
  ];

  const virtualAssistantRef = useRef();

  const handleActionClick = () => {
    const currentScenario = scenarios[scenarioIndex];
    setPoints((prevPoints) => prevPoints + currentScenario.points);

    if (virtualAssistantRef.current) {
      virtualAssistantRef.current.showAssistant(currentScenario.consequence);
    }

    // Move to the next scenario
    setScenarioIndex((prevIndex) => prevIndex + 1);
  };

  useEffect(() => {
    // Display initial scenario when the component mounts
    if (virtualAssistantRef.current && scenarios.length > 0) {
      virtualAssistantRef.current.showAssistant(
        "Welcome to the Malware Invasion simulation. Your decisions will determine your cybersecurity level."
      );
    }
  }, []);

  return (
    <Layout>
      <VirtualAssistant ref={virtualAssistantRef} />
      <div className={styles.chromeContainer}>
        <GoogleSearch websites={websites}></GoogleSearch>
      </div>
    </Layout>
  );
};

export default MalwareInvasion;
